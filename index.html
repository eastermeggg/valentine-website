<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>J-Bae, Will You Be My Valentine?</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #e60028;
      color: #fff;
      font-family: 'Press Start 2P', cursive;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* ===== STARS ===== */
    .stars {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    .star {
      position: absolute;
      width: 4px; height: 4px;
      background: #fff;
      animation: twinkle 2s infinite alternate;
    }
    @keyframes twinkle {
      0% { opacity: 0.1; }
      100% { opacity: 0.5; }
    }

    /* ===== FLOATING HEARTS ===== */
    .floating-hearts {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .pixel-heart-float {
      position: absolute;
      bottom: -40px;
      animation: floatUp linear infinite;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0) rotate(0deg); opacity: 0.8; }
      100% { transform: translateY(-110vh) rotate(15deg); opacity: 0; }
    }

    /* ===== PROPOSAL SCREEN ===== */
    .proposal-screen {
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px 20px;
      text-align: center;
      transition: opacity 0.5s;
    }

    /* Pixel heart - just the beating heart */
    .big-heart-wrap {
      position: relative;
      width: 280px;
      height: 245px;
      animation: heartBeat 1s ease-in-out infinite;
    }
    @keyframes heartBeat {
      0%   { transform: scale(1); }
      15%  { transform: scale(1.1); }
      30%  { transform: scale(1); }
      45%  { transform: scale(1.07); }
      60%  { transform: scale(1); }
      100% { transform: scale(1); }
    }
    .big-heart-wrap canvas {
      image-rendering: pixelated;
      width: 280px;
      height: 245px;
    }

    /* Question text below heart */
    .question-text {
      margin-top: 32px;
      font-size: 16px;
      color: #fff;
      line-height: 2.2;
      text-shadow: 2px 2px 0 #b8002a;
      white-space: nowrap;
    }
    .question-text .name {
      color: #ffd6e0;
    }

    /* ===== BUTTONS ===== */
    .btn-row {
      display: flex;
      gap: 30px;
      margin-top: 36px;
      align-items: center;
      justify-content: center;
      min-height: 70px;
      position: relative;
      width: 100%;
    }

    .pixel-btn {
      padding: 16px 34px;
      font-family: 'Press Start 2P', cursive;
      font-size: 13px;
      color: #fff;
      border: none;
      cursor: pointer;
      text-transform: uppercase;
      transition: transform 0.1s;
      position: relative;
    }
    .pixel-btn:active {
      transform: translate(4px, 4px) !important;
    }

    .btn-yes {
      background: #fff;
      color: #e60028;
      box-shadow: 5px 5px 0 #ffb6c1;
    }
    .btn-yes:hover {
      transform: translate(2px, 2px);
      box-shadow: 3px 3px 0 #ffb6c1;
    }

    .btn-no {
      background: #ffb6c1;
      color: #e60028;
      box-shadow: 5px 5px 0 #ff8fa3;
      transition: all 0.3s ease;
      position: absolute;
    }

    .dodge-count {
      margin-top: 14px;
      font-size: 8px;
      color: #fff;
      min-height: 20px;
      transition: color 0.3s;
    }

    /* ===== SUCCESS SCREEN ===== */
    .success-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1000;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #e60028;
      text-align: center;
      padding: 30px;
      overflow-y: auto;
    }
    .success-screen.show {
      display: flex;
      animation: fadeIn 0.6s ease-out;
    }
    @keyframes fadeIn {
      0%   { opacity: 0; }
      100% { opacity: 1; }
    }

    .success-heart {
      font-size: 70px;
      animation: successBeat 1s ease-in-out infinite;
    }
    @keyframes successBeat {
      0%   { transform: scale(1); }
      15%  { transform: scale(1.15); }
      30%  { transform: scale(1); }
      45%  { transform: scale(1.1); }
      60%  { transform: scale(1); }
      100% { transform: scale(1); }
    }

    .success-title {
      font-size: 18px;
      color: #fff;
      text-shadow: 3px 3px 0 #b8002a;
      margin-top: 18px;
    }

    .love-note {
      margin-top: 28px;
      background: #fff;
      border: 4px solid #ffb6c1;
      padding: 28px;
      max-width: 560px;
      width: 92%;
      box-shadow: 8px 8px 0 #ff8fa3;
    }
    .love-note p {
      font-size: 9px;
      line-height: 2.6;
      color: #cc0033;
    }
    .love-note .hl {
      color: #e60028;
      font-style: normal;
    }
    .love-note .sign {
      margin-top: 22px;
      font-size: 8px;
      color: #ff6b81;
      text-align: right;
      line-height: 2.4;
    }

    .footer {
      margin-top: 36px;
      font-size: 7px;
      color: #ffd6e0;
      line-height: 2.4;
      opacity: 0.8;
    }

    /* ===== CONFETTI ===== */
    .confetti-piece {
      position: fixed;
      z-index: 999;
      pointer-events: none;
      animation: confettiFall linear forwards;
    }
    @keyframes confettiFall {
      0% {
        transform: translateY(-10vh) rotate(0deg) scale(1);
        opacity: 1;
      }
      80% { opacity: 1; }
      100% {
        transform: translateY(110vh) rotate(var(--rot)) scale(0.5);
        opacity: 0;
      }
    }

    /* ===== PARTICLE ===== */
    .particle {
      position: fixed;
      pointer-events: none;
      z-index: 100;
      font-size: 20px;
      animation: particleFly 1s ease-out forwards;
    }
    @keyframes particleFly {
      0%   { transform: translate(0,0) scale(1); opacity: 1; }
      100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 600px) {
      .big-heart-wrap { width: 210px; height: 184px; }
      .big-heart-wrap canvas { width: 210px; height: 184px; }
      .question-text { font-size: 11px; white-space: normal; }
      .pixel-btn { font-size: 11px; padding: 14px 26px; }
      .success-title { font-size: 13px; }
      .love-note p { font-size: 8px; }
      .success-heart { font-size: 50px; }
    }

    @media (max-width: 380px) {
      .big-heart-wrap { width: 170px; height: 149px; }
      .big-heart-wrap canvas { width: 170px; height: 149px; }
      .question-text { font-size: 9px; white-space: normal; }
      .pixel-btn { font-size: 9px; padding: 12px 20px; }
    }
  </style>
</head>
<body>

  <!-- Background layers -->
  <div class="stars" id="stars"></div>
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- ===== PROPOSAL SCREEN ===== -->
  <div class="proposal-screen" id="proposalScreen">

    <!-- Beating pixel heart -->
    <div class="big-heart-wrap">
      <canvas id="heartCanvas" width="32" height="28"></canvas>
    </div>

    <!-- Question below the heart -->
    <div class="question-text">
      <span class="name">J-Bae</span>, will you be my valentine?
    </div>

    <!-- NO first (left), YES second (right) -->
    <div class="btn-row" id="btnRow">
      <button class="pixel-btn btn-no" id="btnNo">No</button>
      <button class="pixel-btn btn-yes" id="btnYes">Yes!</button>
    </div>

    <div class="dodge-count" id="dodgeCount"></div>
  </div>

  <!-- ===== SUCCESS SCREEN ===== -->
  <div class="success-screen" id="successScreen">
    <div class="success-heart">&#x2764;&#xFE0F;</div>
    <div class="success-title">I KNEW YOU'D SAY YES!</div>
    <div class="love-note">
      <p>
        My dear <span class="hl">J-Bae</span>,
        <br><br>
        I'm out here in <span class="hl">San Francisco</span>
        counting down the days,
        and honestly every cool thing I see
        just makes me wish
        <span class="hl">you were here</span> next to me.
        <br><br>
        Already 3 days without you
        and I've realized something
        I already knew:
        <span class="hl">you're my favorite person
        in any city, any timezone,
        any pixel on the map.</span>
        <br><br>
        Distance doesn't change a thing.
        If anything it just made me
        more sure that
        <span class="hl">I love you deeply</span>,
        and I can't wait to be
        back with you.
        <br><br>
        You're my <span class="hl">Player 2</span>,
        my co-op partner,
        my permanent save file.
        No amount of miles
        could change that.
      </p>
      <div class="sign">
        Missing you like crazy,<br>
        Your Valentine &#x2764;&#xFE0F;<br>
        From SF, with all my heart
      </div>
    </div>

    <div class="footer">
      CRAFTED WITH &#x2764;&#xFE0F; AND PIXELS
    </div>
  </div>

  <script>
    // ============================
    // PIXEL HEART (red / pink / white palette)
    // ============================
    const canvas = document.getElementById('heartCanvas');
    const ctx = canvas.getContext('2d');

    const H = [
      '00000111111000000011111100000000',
      '00011111111110001111111111000000',
      '01111111111111111111111111110000',
      '11111111111111111111111111111000',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '11111111111111111111111111111100',
      '01111111111111111111111111111000',
      '01111111111111111111111111111000',
      '00111111111111111111111111110000',
      '00111111111111111111111111110000',
      '00011111111111111111111111100000',
      '00001111111111111111111110000000',
      '00000111111111111111111100000000',
      '00000011111111111111111000000000',
      '00000001111111111111110000000000',
      '00000000111111111111100000000000',
      '00000000011111111111000000000000',
      '00000000001111111110000000000000',
      '00000000000111111100000000000000',
      '00000000000011111000000000000000',
      '00000000000001110000000000000000',
      '00000000000000100000000000000000',
      '00000000000000000000000000000000',
    ];

    // Bright red / light pink / white
    const palette = ['#ff1a4d', '#ff4d6d', '#ffb6c1', '#ffd6e0', '#ffffff', '#ffffff'];

    function drawHeart() {
      ctx.clearRect(0, 0, 32, 28);
      for (let y = 0; y < H.length; y++) {
        for (let x = 0; x < H[y].length; x++) {
          if (H[y][x] === '1') {
            let ci;
            // top rows get lighter (highlight shimmer)
            if (y < 5 && x > 4 && x < 14) {
              ci = Math.random() > 0.7 ? 5 : (Math.random() > 0.5 ? 3 : 4);
            } else if (Math.random() > 0.88) {
              ci = Math.floor(Math.random() * palette.length);
            } else {
              ci = y < 8 ? 2 : (Math.random() > 0.4 ? 0 : 1);
            }
            ctx.fillStyle = palette[ci];
            ctx.fillRect(x, y, 1, 1);
          }
        }
      }
    }
    drawHeart();
    setInterval(drawHeart, 400);

    // ============================
    // STARS (pink-white tones)
    // ============================
    const starsEl = document.getElementById('stars');
    const starColors = ['#ffb6c1', '#ffd6e0', '#ffffff', '#ffffff'];
    for (let i = 0; i < 100; i++) {
      const s = document.createElement('div');
      s.className = 'star';
      s.style.left = Math.random() * 100 + '%';
      s.style.top = Math.random() * 100 + '%';
      s.style.animationDelay = Math.random() * 2 + 's';
      s.style.opacity = Math.random();
      s.style.background = starColors[Math.floor(Math.random() * starColors.length)];
      if (Math.random() > 0.75) { s.style.width = '6px'; s.style.height = '6px'; }
      starsEl.appendChild(s);
    }

    // ============================
    // FLOATING HEARTS
    // ============================
    const floatingEl = document.getElementById('floatingHearts');
    const heartEmojis = ['\u2764\uFE0F', '\uD83D\uDC96', '\uD83D\uDC95', '\uD83D\uDC97'];

    function spawnFloatingHeart() {
      const h = document.createElement('div');
      h.className = 'pixel-heart-float';
      h.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      h.style.left = Math.random() * 100 + '%';
      h.style.fontSize = (12 + Math.random() * 16) + 'px';
      h.style.animationDuration = (7 + Math.random() * 8) + 's';
      h.style.animationDelay = Math.random() * 2 + 's';
      floatingEl.appendChild(h);
      setTimeout(() => h.remove(), 17000);
    }
    setInterval(spawnFloatingHeart, 1200);

    // ============================
    // SOUNDS
    // ============================
    let audioCtx;
    function getAudio() {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      return audioCtx;
    }
    function playBeep(freq, dur) {
      const a = getAudio();
      const o = a.createOscillator();
      const g = a.createGain();
      o.connect(g); g.connect(a.destination);
      o.type = 'square';
      o.frequency.value = freq;
      g.gain.value = 0.06;
      g.gain.exponentialRampToValueAtTime(0.001, a.currentTime + dur);
      o.start(); o.stop(a.currentTime + dur);
    }
    function playNope() { playBeep(200, 0.12); setTimeout(() => playBeep(150, 0.12), 100); }
    function playVictory() {
      [523, 659, 784, 1047, 1319].forEach((n, i) => setTimeout(() => playBeep(n, 0.18), i * 110));
    }

    // ============================
    // NO BUTTON - RUNAWAY
    // ============================
    const btnNo = document.getElementById('btnNo');
    const btnRow = document.getElementById('btnRow');
    const dodgeCount = document.getElementById('dodgeCount');
    const noTexts = ['No', 'Wait...', 'Huh?', 'Try again!', 'Really??', 'You sure?', 'Nope!', 'C\'mon!', 'Pleeeease?', 'No way!'];
    let dodges = 0;

    function dodgeNoButton() {
      dodges++;
      playNope();

      btnNo.textContent = noTexts[dodges % noTexts.length];

      const scale = Math.max(0.7, 1 - dodges * 0.03);
      btnNo.style.transform = `scale(${scale})`;

      // fly to random spot on screen
      btnNo.style.position = 'fixed';
      const bw = btnNo.offsetWidth;
      const bh = btnNo.offsetHeight;
      const pad = 10;
      const x = pad + Math.random() * (window.innerWidth - bw - pad * 2);
      const y = pad + Math.random() * (window.innerHeight - bh - pad * 2);
      btnNo.style.left = x + 'px';
      btnNo.style.top = y + 'px';

      const msgs = ['', 'nice try!', 'too slow!', 'haha!', 'not today!', 'wrong answer!', 'keep trying...', 'lol nope!', 'almost!'];
      dodgeCount.textContent = msgs[dodges % msgs.length];

      // YES grows with each dodge
      const yesScale = Math.min(1.5, 1 + dodges * 0.05);
      document.getElementById('btnYes').style.transform = `scale(${yesScale})`;
    }

    btnNo.addEventListener('mouseenter', dodgeNoButton);
    btnNo.addEventListener('touchstart', (e) => { e.preventDefault(); dodgeNoButton(); }, { passive: false });
    btnNo.addEventListener('click', (e) => { e.preventDefault(); dodgeNoButton(); });

    // ============================
    // YES - SUCCESS
    // ============================
    document.getElementById('btnYes').addEventListener('click', () => {
      playVictory();

      document.getElementById('proposalScreen').style.opacity = '0';
      setTimeout(() => { document.getElementById('proposalScreen').style.display = 'none'; }, 500);

      setTimeout(() => {
        document.getElementById('successScreen').classList.add('show');
        launchConfetti();
        const ci = setInterval(launchConfetti, 2800);
        setTimeout(() => clearInterval(ci), 14000);
      }, 400);
    });

    // ============================
    // CONFETTI (red / pink / white)
    // ============================
    function launchConfetti() {
      const colors = ['#ff1a4d', '#ff4d6d', '#ffb6c1', '#ffd6e0', '#ffffff', '#ffffff', '#ff8fa3', '#ffc0cb'];
      const shapes = ['\u2764\uFE0F', '\uD83D\uDC96', '\uD83D\uDC95', '\uD83D\uDC97'];

      for (let i = 0; i < 50; i++) {
        const el = document.createElement('div');
        el.className = 'confetti-piece';

        if (Math.random() > 0.5) {
          el.textContent = shapes[Math.floor(Math.random() * shapes.length)];
          el.style.fontSize = (10 + Math.random() * 16) + 'px';
        } else {
          el.style.width = (5 + Math.random() * 9) + 'px';
          el.style.height = (5 + Math.random() * 9) + 'px';
          el.style.background = colors[Math.floor(Math.random() * colors.length)];
        }

        el.style.left = Math.random() * 100 + 'vw';
        el.style.setProperty('--rot', (Math.random() * 1080 - 540) + 'deg');
        el.style.animationDuration = (2 + Math.random() * 3) + 's';
        el.style.animationDelay = Math.random() * 1.5 + 's';

        document.body.appendChild(el);
        setTimeout(() => el.remove(), 6000);
      }
    }

    // ============================
    // CLICK SPARKLE
    // ============================
    document.addEventListener('click', (e) => {
      if (e.target.closest('.pixel-btn')) return;
      const sp = document.createElement('div');
      sp.className = 'particle';
      sp.textContent = '\u2728';
      sp.style.left = e.clientX + 'px';
      sp.style.top = e.clientY + 'px';
      sp.style.setProperty('--tx', (Math.random() - 0.5) * 60 + 'px');
      sp.style.setProperty('--ty', -40 - Math.random() * 40 + 'px');
      document.body.appendChild(sp);
      setTimeout(() => sp.remove(), 1000);
    });
  </script>
</body>
</html>
